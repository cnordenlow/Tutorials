<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 SQL | Templates</title>
  <meta name="description" content="4 SQL | Templates" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="4 SQL | Templates" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 SQL | Templates" />
  
  
  

<meta name="author" content="christoffer.nordenlow@riksbank.se" />


<meta name="date" content="2020-05-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="fi-fx.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Intro</a></li>
<li class="chapter" data-level="1" data-path="r.html"><a href="r.html"><i class="fa fa-check"></i><b>1</b> R</a><ul>
<li class="chapter" data-level="1.1" data-path="r.html"><a href="r.html#create-template-tables"><i class="fa fa-check"></i><b>1.1</b> Create template tables</a><ul>
<li class="chapter" data-level="1.1.1" data-path="r.html"><a href="r.html#template-tables"><i class="fa fa-check"></i><b>1.1.1</b> Template tables</a></li>
<li class="chapter" data-level="1.1.2" data-path="r.html"><a href="r.html#transforming-data-with-apply-etc"><i class="fa fa-check"></i><b>1.1.2</b> Transforming data with Apply etc</a></li>
<li class="chapter" data-level="1.1.3" data-path="r.html"><a href="r.html#tally-function"><i class="fa fa-check"></i><b>1.1.3</b> Tally-function</a></li>
<li class="chapter" data-level="1.1.4" data-path="r.html"><a href="r.html#useful-functions-expressions"><i class="fa fa-check"></i><b>1.1.4</b> Useful functions / expressions</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="r.html"><a href="r.html#working-with-strings-and-characters"><i class="fa fa-check"></i><b>1.2</b> Working with strings and characters</a></li>
<li class="chapter" data-level="1.3" data-path="r.html"><a href="r.html#visualize"><i class="fa fa-check"></i><b>1.3</b> Visualize</a><ul>
<li class="chapter" data-level="1.3.1" data-path="r.html"><a href="r.html#ggplots"><i class="fa fa-check"></i><b>1.3.1</b> Ggplots</a></li>
<li class="chapter" data-level="1.3.2" data-path="r.html"><a href="r.html#different-tables"><i class="fa fa-check"></i><b>1.3.2</b> Different tables</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="r.html"><a href="r.html#misc"><i class="fa fa-check"></i><b>1.4</b> Misc</a><ul>
<li class="chapter" data-level="1.4.1" data-path="r.html"><a href="r.html#moving-average"><i class="fa fa-check"></i><b>1.4.1</b> Moving average</a></li>
<li class="chapter" data-level="1.4.2" data-path="r.html"><a href="r.html#date-formating"><i class="fa fa-check"></i><b>1.4.2</b> Date Formating</a></li>
<li class="chapter" data-level="1.4.3" data-path="r.html"><a href="r.html#loops"><i class="fa fa-check"></i><b>1.4.3</b> Loops</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="r.html"><a href="r.html#r-markdown"><i class="fa fa-check"></i><b>1.5</b> R Markdown</a><ul>
<li class="chapter" data-level="1.5.1" data-path="r.html"><a href="r.html#render-multiple-reports"><i class="fa fa-check"></i><b>1.5.1</b> Render multiple reports</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="r.html"><a href="r.html#web-scraping"><i class="fa fa-check"></i><b>1.6</b> Web Scraping</a><ul>
<li class="chapter" data-level="1.6.1" data-path="r.html"><a href="r.html#scrape-all-sub-page"><i class="fa fa-check"></i><b>1.6.1</b> Scrape all sub page</a></li>
<li class="chapter" data-level="1.6.2" data-path="r.html"><a href="r.html#scrape-pl-table"><i class="fa fa-check"></i><b>1.6.2</b> Scrape PL table</a></li>
<li class="chapter" data-level="1.6.3" data-path="r.html"><a href="r.html#scrape-all-tables"><i class="fa fa-check"></i><b>1.6.3</b> Scrape all tables</a></li>
<li class="chapter" data-level="1.6.4" data-path="r.html"><a href="r.html#scrape-title"><i class="fa fa-check"></i><b>1.6.4</b> Scrape title</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="excel-vba.html"><a href="excel-vba.html"><i class="fa fa-check"></i><b>2</b> Excel &amp; VBA</a><ul>
<li class="chapter" data-level="2.1" data-path="excel-vba.html"><a href="excel-vba.html#import"><i class="fa fa-check"></i><b>2.1</b> Import</a><ul>
<li class="chapter" data-level="2.1.1" data-path="excel-vba.html"><a href="excel-vba.html#standard-way-to-import-file"><i class="fa fa-check"></i><b>2.1.1</b> Standard way to import file</a></li>
<li class="chapter" data-level="2.1.2" data-path="excel-vba.html"><a href="excel-vba.html#import-file-with-conditions"><i class="fa fa-check"></i><b>2.1.2</b> Import file with conditions</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="excel-vba.html"><a href="excel-vba.html#loops-1"><i class="fa fa-check"></i><b>2.2</b> Loops</a><ul>
<li class="chapter" data-level="2.2.1" data-path="excel-vba.html"><a href="excel-vba.html#for-loop"><i class="fa fa-check"></i><b>2.2.1</b> For loop</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="excel-vba.html"><a href="excel-vba.html#misc-1"><i class="fa fa-check"></i><b>2.3</b> Misc</a><ul>
<li class="chapter" data-level="2.3.1" data-path="excel-vba.html"><a href="excel-vba.html#misc-2"><i class="fa fa-check"></i><b>2.3.1</b> Misc</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="excel-vba.html"><a href="excel-vba.html#useful-excel-formulas"><i class="fa fa-check"></i><b>2.4</b> Useful excel formulas</a></li>
<li class="chapter" data-level="2.5" data-path="excel-vba.html"><a href="excel-vba.html#useful-bloomberg-formulas"><i class="fa fa-check"></i><b>2.5</b> Useful Bloomberg formulas</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="fi-fx.html"><a href="fi-fx.html"><i class="fa fa-check"></i><b>3</b> FI &amp; FX</a><ul>
<li class="chapter" data-level="3.1" data-path="fi-fx.html"><a href="fi-fx.html#fixed-income"><i class="fa fa-check"></i><b>3.1</b> Fixed Income</a><ul>
<li class="chapter" data-level="3.1.1" data-path="fi-fx.html"><a href="fi-fx.html#bond-calculator-in-r"><i class="fa fa-check"></i><b>3.1.1</b> Bond Calculator in R</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="fi-fx.html"><a href="fi-fx.html#foreign-exchange"><i class="fa fa-check"></i><b>3.2</b> Foreign Exchange</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="sql.html"><a href="sql.html"><i class="fa fa-check"></i><b>4</b> SQL</a><ul>
<li class="chapter" data-level="4.1" data-path="sql.html"><a href="sql.html#basic"><i class="fa fa-check"></i><b>4.1</b> Basic</a><ul>
<li class="chapter" data-level="4.1.1" data-path="sql.html"><a href="sql.html#select"><i class="fa fa-check"></i><b>4.1.1</b> SELECT</a></li>
<li class="chapter" data-level="4.1.2" data-path="sql.html"><a href="sql.html#group-by"><i class="fa fa-check"></i><b>4.1.2</b> GROUP BY</a></li>
<li class="chapter" data-level="4.1.3" data-path="sql.html"><a href="sql.html#case-statements"><i class="fa fa-check"></i><b>4.1.3</b> CASE statements</a></li>
<li class="chapter" data-level="4.1.4" data-path="sql.html"><a href="sql.html#join"><i class="fa fa-check"></i><b>4.1.4</b> JOIN</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="sql.html"><a href="sql.html#sql-databases-and-r"><i class="fa fa-check"></i><b>4.2</b> SQL databases and R</a><ul>
<li class="chapter" data-level="4.2.1" data-path="sql.html"><a href="sql.html#connecting-to-a-database-from-r"><i class="fa fa-check"></i><b>4.2.1</b> Connecting to a database from R</a></li>
<li class="chapter" data-level="4.2.2" data-path="sql.html"><a href="sql.html#running-sql-syntax-in-r"><i class="fa fa-check"></i><b>4.2.2</b> Running SQL syntax in R</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Templates</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sql" class="section level1">
<h1><span class="header-section-number">4</span> SQL</h1>
<table>
<colgroup>
<col width="25%" />
<col width="50%" />
<col width="25%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Operator</th>
<th align="center">Description</th>
<th align="right">Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">abs()</td>
<td align="center">Calculates the absolute value</td>
<td align="right">abs(x)</td>
</tr>
<tr class="even">
<td align="left">coalesce()</td>
<td align="center">Converts a possible null value into a default</td>
<td align="right">coalesce(z,y)</td>
</tr>
<tr class="odd">
<td align="left">instr()</td>
<td align="center">Checks if a text string contains another text string</td>
<td align="right">instr(‘HTX’, ‘TX’)</td>
</tr>
<tr class="even">
<td align="left">length()</td>
<td align="center">Provides the number of characters in a string</td>
<td align="right">length(‘Test’)</td>
</tr>
<tr class="odd">
<td align="left">trim()</td>
<td align="center">Removes extraneous on both sides of a string</td>
<td align="right">trim(’ Test ’)</td>
</tr>
<tr class="even">
<td align="left">ltrim()</td>
<td align="center">Removes extraneous on the left side of a string</td>
<td align="right">ltrim(’ Test’)</td>
</tr>
<tr class="odd">
<td align="left">rtrim()</td>
<td align="center">Removes extraneous on the right side of a string</td>
<td align="right">rtrim(‘Test’)</td>
</tr>
<tr class="even">
<td align="left">random()</td>
<td align="center">Returns a random number</td>
<td align="right">random()</td>
</tr>
<tr class="odd">
<td align="left">round()</td>
<td align="center">Rounds a decimal to specified number</td>
<td align="right">round(100.101, 2)</td>
</tr>
<tr class="even">
<td align="left">replace()</td>
<td align="center">Replaces a substring of text in a string</td>
<td align="right">replace(‘Test df’, ’ df’, ’’)</td>
</tr>
<tr class="odd">
<td align="left">substr()</td>
<td align="center">Extracts a range of characters from a string with their num position</td>
<td align="right">substr(‘Test’, 2,3)</td>
</tr>
<tr class="even">
<td align="left">lower()</td>
<td align="center">Turns all letters in a string to lowercase</td>
<td align="right">lower(‘Test’)</td>
</tr>
<tr class="odd">
<td align="left">upper()</td>
<td align="center">Turns all letters in a string to uppercase</td>
<td align="right">upper(‘Test’)</td>
</tr>
</tbody>
</table>
<div id="basic" class="section level2">
<h2><span class="header-section-number">4.1</span> Basic</h2>
<p><em><a href="https://www.w3schools.com/sql/default.asp" class="uri">https://www.w3schools.com/sql/default.asp</a></em>
<em>‘Getting started with SQL’ using SQLite.</em>
<em><a href="https://github.com/thomasnield/oreilly_getting_started_with_sql" class="uri">https://github.com/thomasnield/oreilly_getting_started_with_sql</a></em></p>
<div id="select" class="section level3">
<h3><span class="header-section-number">4.1.1</span> SELECT</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">SELECT <span class="op">*</span><span class="st"> </span>FROM CUSTOMER;</a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3">SELECT CUSTOMER_ID,  NAME FROM CUSTOMER;</a>
<a class="sourceLine" id="cb1-4" title="4"></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co"># Generate a calculated column</span></a>
<a class="sourceLine" id="cb1-6" title="6">SELECT</a>
<a class="sourceLine" id="cb1-7" title="7">PRODUCT_ID,</a>
<a class="sourceLine" id="cb1-8" title="8">DESCRIPTION,</a>
<a class="sourceLine" id="cb1-9" title="9">PRICE AS UNTAXED_PRICE,</a>
<a class="sourceLine" id="cb1-10" title="10"><span class="kw">round</span>(PRICE <span class="op">*</span><span class="st"> </span><span class="fl">1.07</span>,<span class="dv">2</span>) AS TAXED_PRICE</a>
<a class="sourceLine" id="cb1-11" title="11">FROM PRODUCT;</a>
<a class="sourceLine" id="cb1-12" title="12"></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="co"># Text concatenation. Concatenation works with any data type.</span></a>
<a class="sourceLine" id="cb1-14" title="14">SELECT NAME,</a>
<a class="sourceLine" id="cb1-15" title="15">CITY <span class="op">||</span><span class="st"> &#39;, &#39;</span> <span class="op">||</span><span class="st"> </span>STATE AS LOCATION</a>
<a class="sourceLine" id="cb1-16" title="16">FROM CUSTOMER;</a></code></pre></div>
<div id="where" class="section level4">
<h4><span class="header-section-number">4.1.1.1</span> WHERE</h4>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">SELECT <span class="op">*</span><span class="st"> </span>FROM STATION_DATA</a>
<a class="sourceLine" id="cb2-2" title="2">WHERE year =<span class="st"> </span><span class="dv">2010</span>;</a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">#Use != or &lt;&gt; to get everything but 2010</span></a>
<a class="sourceLine" id="cb2-5" title="5">SELECT <span class="op">*</span><span class="st"> </span>FROM STATION_DATA</a>
<a class="sourceLine" id="cb2-6" title="6">WHERE year <span class="op">!=</span><span class="st"> </span><span class="dv">2010</span>;</a>
<a class="sourceLine" id="cb2-7" title="7"></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#AND, OR, IN statements</span></a>
<a class="sourceLine" id="cb2-9" title="9">SELECT <span class="op">*</span><span class="st"> </span>FROM STATION_DATA</a>
<a class="sourceLine" id="cb2-10" title="10">WHERE year <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2005</span> AND year <span class="op">&lt;=</span><span class="st"> </span><span class="dv">2010</span>;</a>
<a class="sourceLine" id="cb2-11" title="11"></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="co">#in</span></a>
<a class="sourceLine" id="cb2-13" title="13">SELECT <span class="op">*</span><span class="st"> </span>FROM STATION_DATA</a>
<a class="sourceLine" id="cb2-14" title="14">WHERE MONTH <span class="kw">IN</span> (<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>,<span class="dv">12</span>)</a>
<a class="sourceLine" id="cb2-15" title="15"></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="co">#not in</span></a>
<a class="sourceLine" id="cb2-17" title="17">SELECT <span class="op">*</span><span class="st"> </span>FROM STATION_DATA</a>
<a class="sourceLine" id="cb2-18" title="18">WHERE MONTH NOT <span class="kw">IN</span> (<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>,<span class="dv">12</span>)</a>
<a class="sourceLine" id="cb2-19" title="19"></a>
<a class="sourceLine" id="cb2-20" title="20"><span class="co">#modulus operator</span></a>
<a class="sourceLine" id="cb2-21" title="21"><span class="co">#modulus returns the remainder instead of the quotient. A remainder of 0 means there is no remainder at all</span></a>
<a class="sourceLine" id="cb2-22" title="22">SELECT <span class="op">*</span><span class="st"> </span>FROM STATION_DATA</a>
<a class="sourceLine" id="cb2-23" title="23">WHERE MONTH %  <span class="dv">3</span> =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb2-24" title="24"></a>
<a class="sourceLine" id="cb2-25" title="25"><span class="co">#using where on text</span></a>
<a class="sourceLine" id="cb2-26" title="26">SELECT <span class="op">*</span><span class="st"> </span>FROM STATION_DATA</a>
<a class="sourceLine" id="cb2-27" title="27">WHERE report_code <span class="cf">in</span> (<span class="st">&#39;513A63&#39;</span>, <span class="st">&#39;1F8A7B&#39;</span>)</a>
<a class="sourceLine" id="cb2-28" title="28"></a>
<a class="sourceLine" id="cb2-29" title="29">SELECT <span class="op">*</span><span class="st"> </span>FROM STATION_DATA</a>
<a class="sourceLine" id="cb2-30" title="30">WHERE <span class="kw">length</span>(report_code) =<span class="st"> </span><span class="dv">6</span></a>
<a class="sourceLine" id="cb2-31" title="31"></a>
<a class="sourceLine" id="cb2-32" title="32"><span class="co">#wildcards</span></a>
<a class="sourceLine" id="cb2-33" title="33">SELECT <span class="op">*</span><span class="st"> </span>FROM STATION_DATA</a>
<a class="sourceLine" id="cb2-34" title="34">WHERE report_code LIKE <span class="st">&#39;A%&#39;</span></a>
<a class="sourceLine" id="cb2-35" title="35"></a>
<a class="sourceLine" id="cb2-36" title="36"><span class="co">#B as the first, C as the third letter</span></a>
<a class="sourceLine" id="cb2-37" title="37"></a>
<a class="sourceLine" id="cb2-38" title="38">SELECT <span class="op">*</span><span class="st"> </span>FROM STATION_DATA</a>
<a class="sourceLine" id="cb2-39" title="39">WHERE report_code LIKE <span class="st">&#39;B_C%&#39;</span></a>
<a class="sourceLine" id="cb2-40" title="40"></a>
<a class="sourceLine" id="cb2-41" title="41"><span class="co">#Other text functions as INSTR, SUBSTR, REPLACE ETC</span></a>
<a class="sourceLine" id="cb2-42" title="42"></a>
<a class="sourceLine" id="cb2-43" title="43">SELECT <span class="op">*</span><span class="st"> </span>FROM  station_data</a>
<a class="sourceLine" id="cb2-44" title="44">WHERE snow_depth IS <span class="ot">NULL</span>;</a>
<a class="sourceLine" id="cb2-45" title="45"></a>
<a class="sourceLine" id="cb2-46" title="46"><span class="co">#Use coalesce to conert NULL to 0, &quot;N/A&quot; etc</span></a>
<a class="sourceLine" id="cb2-47" title="47"></a>
<a class="sourceLine" id="cb2-48" title="48">SELECT <span class="op">*</span><span class="st"> </span>FROM  station_data</a>
<a class="sourceLine" id="cb2-49" title="49">WHERE <span class="kw">coalesce</span>(precipitation,<span class="dv">0</span>) <span class="op">&lt;=</span><span class="st"> </span><span class="fl">0.5</span>;</a>
<a class="sourceLine" id="cb2-50" title="50"></a>
<a class="sourceLine" id="cb2-51" title="51">SELECT <span class="op">*</span><span class="st"> </span>FROM station_data</a>
<a class="sourceLine" id="cb2-52" title="52"><span class="kw">WHERE</span> (<span class="dt">rain =</span> <span class="dv">1</span> AND temperature <span class="op">&lt;=</span><span class="st"> </span><span class="dv">32</span>)</a>
<a class="sourceLine" id="cb2-53" title="53">OR snow_depth <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>;</a></code></pre></div>
</div>
</div>
<div id="group-by" class="section level3">
<h3><span class="header-section-number">4.1.2</span> GROUP BY</h3>
<p><em>WHERE filters individual records while HAVING filters aggregations.</em></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">SELECT year, month, <span class="kw">COUNT</span>(<span class="op">*</span>) AS record_count FROM station_data</a>
<a class="sourceLine" id="cb3-2" title="2">WHERE tornado =<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb3-3" title="3">GROUP BY year, month</a>
<a class="sourceLine" id="cb3-4" title="4">ORDER BY year, month</a>
<a class="sourceLine" id="cb3-5" title="5"></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#aggregate</span></a>
<a class="sourceLine" id="cb3-7" title="7">SELECT month, <span class="kw">AVG</span>(temperature) as avg_temp</a>
<a class="sourceLine" id="cb3-8" title="8">FROM station_data</a>
<a class="sourceLine" id="cb3-9" title="9">WHERE year <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2000</span></a>
<a class="sourceLine" id="cb3-10" title="10">GROUP BY month</a>
<a class="sourceLine" id="cb3-11" title="11"></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">#HAVING statement</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">#To be able to filter on aggregate data you need to use HAVING instead of WHERE</span></a>
<a class="sourceLine" id="cb3-14" title="14"></a>
<a class="sourceLine" id="cb3-15" title="15">SELECT year,</a>
<a class="sourceLine" id="cb3-16" title="16"><span class="kw">SUM</span>(precipitation) as total_precipitation</a>
<a class="sourceLine" id="cb3-17" title="17">FROM station_data</a>
<a class="sourceLine" id="cb3-18" title="18">GROUP BY year</a>
<a class="sourceLine" id="cb3-19" title="19">HAVING <span class="kw">sum</span>(precipitation) <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span></a></code></pre></div>
</div>
<div id="case-statements" class="section level3">
<h3><span class="header-section-number">4.1.3</span> CASE statements</h3>
<p><em>CASE statements are read from top to bottom, so the first true condition is the one it uses.</em>
<em>A great benefit of CASE statements compared to WHERE is that you can apply different filters for different aggregate values.</em></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">SELECT report_code, year, month, day, wind_speed,</a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3">CASE</a>
<a class="sourceLine" id="cb4-4" title="4"> WHEN wind_speed <span class="op">&gt;=</span><span class="st"> </span><span class="dv">40</span> THEN <span class="st">&#39;HIGH&#39;</span></a>
<a class="sourceLine" id="cb4-5" title="5"> WHEN wind_speed <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span> THEN <span class="st">&#39;MODERATE&#39;</span></a>
<a class="sourceLine" id="cb4-6" title="6"> ELSE <span class="st">&#39;LOW&#39;</span></a>
<a class="sourceLine" id="cb4-7" title="7"> END as wind_severity</a>
<a class="sourceLine" id="cb4-8" title="8"> </a>
<a class="sourceLine" id="cb4-9" title="9">FROM station_data</a>
<a class="sourceLine" id="cb4-10" title="10"></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co"># Use of CASE to apply different filters</span></a>
<a class="sourceLine" id="cb4-12" title="12">SELECT year, month,</a>
<a class="sourceLine" id="cb4-13" title="13"></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="kw">SUM</span>(CASE WHEN <span class="dt">tornado =</span> <span class="dv">1</span> THEN precipitation ELSE <span class="dv">0</span> END) as tornado_precipitation,</a>
<a class="sourceLine" id="cb4-15" title="15"></a>
<a class="sourceLine" id="cb4-16" title="16"><span class="kw">SUM</span>(CASE WHEN <span class="dt">tornado =</span> <span class="dv">0</span> THEN precipitation ELSE <span class="dv">0</span> END) as non_tornado_precipitation</a>
<a class="sourceLine" id="cb4-17" title="17"></a>
<a class="sourceLine" id="cb4-18" title="18">FROM station_data</a>
<a class="sourceLine" id="cb4-19" title="19">GROUP BY year, month</a>
<a class="sourceLine" id="cb4-20" title="20"></a>
<a class="sourceLine" id="cb4-21" title="21"><span class="co"># Use of boolean expression</span></a>
<a class="sourceLine" id="cb4-22" title="22"></a>
<a class="sourceLine" id="cb4-23" title="23">SELECT month, </a>
<a class="sourceLine" id="cb4-24" title="24"></a>
<a class="sourceLine" id="cb4-25" title="25"><span class="kw">AVG</span>(CASE WHEN rain OR hail THEN temperature ELSE null END) AS avg_precipitation_temp,</a>
<a class="sourceLine" id="cb4-26" title="26"></a>
<a class="sourceLine" id="cb4-27" title="27"><span class="kw">AVG</span>(CASE WHEN <span class="kw">NOT</span> (rain OR hail) THEN temperature ELSE null END) AS avg_non_precipitation_temp</a>
<a class="sourceLine" id="cb4-28" title="28"></a>
<a class="sourceLine" id="cb4-29" title="29">FROM station_data</a>
<a class="sourceLine" id="cb4-30" title="30">WHERE year <span class="op">&gt;</span><span class="st"> </span><span class="dv">2000</span></a>
<a class="sourceLine" id="cb4-31" title="31">GROUP BY month</a></code></pre></div>
</div>
<div id="join" class="section level3">
<h3><span class="header-section-number">4.1.4</span> JOIN</h3>
<p><em>In multiple joins, it may be erroundous to mix LEFT JOIN with INNER JOIN. This is becasue null values cannot be inner joined on and will get filtered out. LEFT JOIN tolerates null values.</em></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co">#INNER JOIN</span></a>
<a class="sourceLine" id="cb5-2" title="2">SELECT ORDER_ID,</a>
<a class="sourceLine" id="cb5-3" title="3">CUSTOMER.CUSTOMER_ID,</a>
<a class="sourceLine" id="cb5-4" title="4">ORDER_DATE,</a>
<a class="sourceLine" id="cb5-5" title="5">ORDER_QTY</a>
<a class="sourceLine" id="cb5-6" title="6"></a>
<a class="sourceLine" id="cb5-7" title="7">FROM CUSTOMER INNER JOIN CUSTOMER_ORDER</a>
<a class="sourceLine" id="cb5-8" title="8">ON CUSTOMER.CUSTOMER_ID =<span class="st"> </span>CUSTOMER_ORDER.CUSTOMER_ID</a>
<a class="sourceLine" id="cb5-9" title="9"></a>
<a class="sourceLine" id="cb5-10" title="10"></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">#LEFT JOIN</span></a>
<a class="sourceLine" id="cb5-12" title="12"></a>
<a class="sourceLine" id="cb5-13" title="13">SELECT ORDER_ID,</a>
<a class="sourceLine" id="cb5-14" title="14">CUSTOMER.CUSTOMER_ID,</a>
<a class="sourceLine" id="cb5-15" title="15">ORDER_DATE,</a>
<a class="sourceLine" id="cb5-16" title="16">ORDER_QTY</a>
<a class="sourceLine" id="cb5-17" title="17"></a>
<a class="sourceLine" id="cb5-18" title="18">FROM CUSTOMER LEFT JOIN CUSTOMER_ORDER</a>
<a class="sourceLine" id="cb5-19" title="19">ON CUSTOMER.CUSTOMER_ID =<span class="st"> </span>CUSTOMER_ORDER.CUSTOMER_ID</a>
<a class="sourceLine" id="cb5-20" title="20"></a>
<a class="sourceLine" id="cb5-21" title="21"><span class="co">#Checking for NULL values</span></a>
<a class="sourceLine" id="cb5-22" title="22">SELECT CUSTOMER.CUSTOMER_ID,</a>
<a class="sourceLine" id="cb5-23" title="23">NAME AS CUSTOMER_NAME</a>
<a class="sourceLine" id="cb5-24" title="24"></a>
<a class="sourceLine" id="cb5-25" title="25">FROM CUSTOMER LEFT JOIN CUSTOMER_ORDER</a>
<a class="sourceLine" id="cb5-26" title="26">ON CUSTOMER.CUSTOMER_ID =<span class="st"> </span>CUSTOMER_ORDER.CUSTOMER_ID</a>
<a class="sourceLine" id="cb5-27" title="27"></a>
<a class="sourceLine" id="cb5-28" title="28">WHERE ORDER_ID IS <span class="ot">NULL</span></a>
<a class="sourceLine" id="cb5-29" title="29"></a>
<a class="sourceLine" id="cb5-30" title="30"><span class="co">#Multiple joins</span></a>
<a class="sourceLine" id="cb5-31" title="31">SELECT</a>
<a class="sourceLine" id="cb5-32" title="32">ORDER_ID,</a>
<a class="sourceLine" id="cb5-33" title="33">CUSTOMER.CUSTOMER_ID,</a>
<a class="sourceLine" id="cb5-34" title="34"><span class="st">&#39;NAME AS CUSTOMER.NAME,&#39;</span></a>
<a class="sourceLine" id="cb5-35" title="35">STREET_ADDRESS,</a>
<a class="sourceLine" id="cb5-36" title="36">CITY,</a>
<a class="sourceLine" id="cb5-37" title="37">STATE,</a>
<a class="sourceLine" id="cb5-38" title="38">ZIP,</a>
<a class="sourceLine" id="cb5-39" title="39">ORDER_DATE,</a>
<a class="sourceLine" id="cb5-40" title="40">PRODUCT_ID,</a>
<a class="sourceLine" id="cb5-41" title="41">DESCRIPTION,</a>
<a class="sourceLine" id="cb5-42" title="42">ORDER_QTY</a>
<a class="sourceLine" id="cb5-43" title="43"></a>
<a class="sourceLine" id="cb5-44" title="44">FROM CUSTOMER</a>
<a class="sourceLine" id="cb5-45" title="45"></a>
<a class="sourceLine" id="cb5-46" title="46">INNER JOIN </a>
<a class="sourceLine" id="cb5-47" title="47">CUSTOMER_ORDER ON CUSTOMER_ORDER.CUSTOMER_ID =<span class="st"> </span>CUSTOMER.CUSTOMER_ID</a>
<a class="sourceLine" id="cb5-48" title="48"></a>
<a class="sourceLine" id="cb5-49" title="49">INNER JOIN </a>
<a class="sourceLine" id="cb5-50" title="50">PRODUCT ON CUSTOMER_ORDER.PRODUCT_ID =<span class="st"> </span>PRODUCT.PRODUCT_ID</a>
<a class="sourceLine" id="cb5-51" title="51"></a>
<a class="sourceLine" id="cb5-52" title="52"><span class="co">#Use coalesce() to turn nulls into zeros.</span></a>
<a class="sourceLine" id="cb5-53" title="53"></a>
<a class="sourceLine" id="cb5-54" title="54">SELECT</a>
<a class="sourceLine" id="cb5-55" title="55">CUSTOMER.CUSTOMER_ID,</a>
<a class="sourceLine" id="cb5-56" title="56">NAME AS CUSTOMER_NAME,</a>
<a class="sourceLine" id="cb5-57" title="57"><span class="kw">coalesce</span>(<span class="kw">sum</span>(ORDER_QTY <span class="op">*</span><span class="st"> </span>PRICE), <span class="dv">0</span>) as TOTAL_REVENUE</a>
<a class="sourceLine" id="cb5-58" title="58"></a>
<a class="sourceLine" id="cb5-59" title="59">FROM CUSTOMER</a>
<a class="sourceLine" id="cb5-60" title="60"></a>
<a class="sourceLine" id="cb5-61" title="61">LEFT JOIN CUSTOMER_ORDER</a>
<a class="sourceLine" id="cb5-62" title="62">ON CUSTOMER.CUSTOMER_ID =<span class="st"> </span>CUSTOMER_ORDER.CUSTOMER_ID</a>
<a class="sourceLine" id="cb5-63" title="63"></a>
<a class="sourceLine" id="cb5-64" title="64">LEFT JOIN PRODUCT</a>
<a class="sourceLine" id="cb5-65" title="65">ON CUSTOMER_ORDER.PRODUCT_ID =<span class="st"> </span>PRODUCT.PRODUCT_ID</a>
<a class="sourceLine" id="cb5-66" title="66"></a>
<a class="sourceLine" id="cb5-67" title="67">GROUP BY <span class="dv">1</span>,<span class="dv">2</span></a></code></pre></div>
</div>
</div>
<div id="sql-databases-and-r" class="section level2">
<h2><span class="header-section-number">4.2</span> SQL databases and R</h2>
<div id="connecting-to-a-database-from-r" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Connecting to a database from R</h3>
<p><em>Access a database from R.</em>
<em>The problem with dplyr is that all operations are conducted in-memory and thus the amount of data you can work with is limited by available memory. The database connection essentially removes that limitation.</em>
<em>Accessing a temp database by downloading it. Dplyr and dbplyr are used in R to point to the database.</em></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="co">#https://datacarpentry.org/R-ecology-lesson/05-r-and-databases.html</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">library</span>(<span class="st">&quot;RSQLite&quot;</span>)</a>
<a class="sourceLine" id="cb6-3" title="3"><span class="kw">library</span>(<span class="st">&quot;plyr&quot;</span>)</a>
<a class="sourceLine" id="cb6-4" title="4"><span class="kw">library</span>(<span class="st">&quot;dbplyr&quot;</span>)</a>
<a class="sourceLine" id="cb6-5" title="5"></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="co"># Downloading database for test</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="kw">dir.create</span>(<span class="st">&quot;data_raw&quot;</span>, <span class="dt">showWarnings =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb6-8" title="8"><span class="kw">download.file</span>(<span class="dt">url =</span> <span class="st">&quot;https://ndownloader.figshare.com/files/2292171&quot;</span>,</a>
<a class="sourceLine" id="cb6-9" title="9">              <span class="dt">destfile =</span> <span class="st">&quot;data_raw/portal_mammals.sqlite&quot;</span>, <span class="dt">mode =</span> <span class="st">&quot;wb&quot;</span>)</a>
<a class="sourceLine" id="cb6-10" title="10"></a>
<a class="sourceLine" id="cb6-11" title="11"><span class="co"># Connect to databse</span></a>
<a class="sourceLine" id="cb6-12" title="12">mammals &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbConnect</span>(RSQLite<span class="op">::</span><span class="kw">SQLite</span>(), <span class="st">&quot;data_raw/portal_mammals.sqlite&quot;</span>)</a>
<a class="sourceLine" id="cb6-13" title="13"></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="co"># Querying with SQL-syntax vs dplyr syntax</span></a>
<a class="sourceLine" id="cb6-15" title="15"></a>
<a class="sourceLine" id="cb6-16" title="16"><span class="co">#sql</span></a>
<a class="sourceLine" id="cb6-17" title="17"><span class="kw">tbl</span>(mammals, <span class="kw">sql</span>(<span class="st">&quot;SELECT year, species_id, plot_id FROM surveys&quot;</span>))</a>
<a class="sourceLine" id="cb6-18" title="18"></a>
<a class="sourceLine" id="cb6-19" title="19"><span class="co">#dplyr</span></a>
<a class="sourceLine" id="cb6-20" title="20">surveys &lt;-<span class="st"> </span><span class="kw">tbl</span>(mammals, <span class="st">&quot;surveys&quot;</span>)</a>
<a class="sourceLine" id="cb6-21" title="21">surveys <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-22" title="22"><span class="st">  </span><span class="kw">select</span>(year, species_id, plot_id)</a>
<a class="sourceLine" id="cb6-23" title="23"></a>
<a class="sourceLine" id="cb6-24" title="24"><span class="co">#Checking head(surveys, n = 10) and nrow(surveys) we see that the  surveys at first glance looks like a data frame but there are some differences.*</span></a>
<a class="sourceLine" id="cb6-25" title="25"><span class="kw">head</span>(surveys, <span class="dt">n =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb6-26" title="26"><span class="kw">nrow</span>(surveys)</a>
<a class="sourceLine" id="cb6-27" title="27"></a>
<a class="sourceLine" id="cb6-28" title="28"><span class="co">#The reason for this is that dplyr dosen´t see the full dataset, only what was asked for when the question in dplyr was translated into SQL.</span></a></code></pre></div>
</div>
<div id="running-sql-syntax-in-r" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Running SQL syntax in R</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">library</span>(sqldf)</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="co">#https://dept.stat.lsa.umich.edu/~jerrick/courses/stat701/notes/sql.html#introduction</span></a>
<a class="sourceLine" id="cb7-3" title="3"></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="kw">sqldf</span>(<span class="st">&#39;SELECT age, circumference FROM Orange WHERE Tree = 1 ORDER BY circumference ASC&#39;</span>)</a>
<a class="sourceLine" id="cb7-5" title="5"></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="kw">sqldf</span>(<span class="st">&quot;SELECT * FROM iris&quot;</span>)</a>
<a class="sourceLine" id="cb7-7" title="7"></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co">#example</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="kw">data</span>(BOD)</a>
<a class="sourceLine" id="cb7-10" title="10">BOD</a>
<a class="sourceLine" id="cb7-11" title="11"></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="co">#Wildcard: used to extract everything</span></a>
<a class="sourceLine" id="cb7-13" title="13">bod2 &lt;-<span class="st"> </span><span class="kw">sqldf</span>(<span class="st">&#39;SELECT * FROM BOD&#39;</span>)</a>
<a class="sourceLine" id="cb7-14" title="14">bod2</a>
<a class="sourceLine" id="cb7-15" title="15"></a>
<a class="sourceLine" id="cb7-16" title="16"><span class="co">#LIMIT controls the number of results</span></a>
<a class="sourceLine" id="cb7-17" title="17"><span class="kw">sqldf</span>(<span class="st">&#39;SELECT * FROM iris LIMIT 5&#39;</span>)</a>
<a class="sourceLine" id="cb7-18" title="18"></a>
<a class="sourceLine" id="cb7-19" title="19"><span class="co">#ORDER BY syntax: ORDER BY var1 {ASC/DESC}, var2 {ASC/DESC}</span></a>
<a class="sourceLine" id="cb7-20" title="20"><span class="kw">sqldf</span>(<span class="st">&quot;SELECT * FROM Orange ORDER BY age ASC, circumference DESC LIMIT 5&quot;</span>)</a>
<a class="sourceLine" id="cb7-21" title="21"></a>
<a class="sourceLine" id="cb7-22" title="22"><span class="co">#Where can be used to add conditional statements</span></a>
<a class="sourceLine" id="cb7-23" title="23"><span class="kw">sqldf</span>(<span class="st">&#39;SELECT demand FROM BOD WHERE Time &lt; 3&#39;</span>)</a>
<a class="sourceLine" id="cb7-24" title="24"></a>
<a class="sourceLine" id="cb7-25" title="25"><span class="co">#WHERE with AND and OR</span></a>
<a class="sourceLine" id="cb7-26" title="26"><span class="kw">sqldf</span>(<span class="st">&#39;SELECT * FROM rock WHERE (peri &gt; 5000 AND shape &lt; .05) OR perm &gt; 1000&#39;</span>)</a>
<a class="sourceLine" id="cb7-27" title="27"></a>
<a class="sourceLine" id="cb7-28" title="28"><span class="co">#IN is used to similiar to %in%</span></a>
<a class="sourceLine" id="cb7-29" title="29"><span class="kw">sqldf</span>(<span class="st">&#39;SELECT * FROM BOD WHERE Time IN (1,7)&#39;</span>)</a>
<a class="sourceLine" id="cb7-30" title="30"><span class="kw">sqldf</span>(<span class="st">&#39;SELECT * FROM BOD WHERE Time NOT IN (1,7)&#39;</span>)</a>
<a class="sourceLine" id="cb7-31" title="31"></a>
<a class="sourceLine" id="cb7-32" title="32"><span class="co">#LIKE weak expression command</span></a>
<a class="sourceLine" id="cb7-33" title="33"><span class="kw">sqldf</span>(<span class="st">&#39;SELECT * FROM chickwts WHERE feed LIKE &quot;%bean&quot; LIMIT 5&#39;</span>)</a>
<a class="sourceLine" id="cb7-34" title="34"><span class="kw">sqldf</span>(<span class="st">&#39;SELECT * FROM chickwts WHERE feed NOT LIKE &quot;%bean&quot; LIMIT 5&#39;</span>)</a>
<a class="sourceLine" id="cb7-35" title="35"></a>
<a class="sourceLine" id="cb7-36" title="36"><span class="co">#Aggregated data: AVG, MEDIAN, MAX, MIN, SUM</span></a>
<a class="sourceLine" id="cb7-37" title="37"><span class="kw">sqldf</span>(<span class="st">&quot;SELECT AVG(circumference) FROM Orange&quot;</span>)</a>
<a class="sourceLine" id="cb7-38" title="38"></a>
<a class="sourceLine" id="cb7-39" title="39"><span class="co">#SELECT COUNT</span></a>
<a class="sourceLine" id="cb7-40" title="40">d &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>), <span class="dt">b =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="ot">NA</span>,<span class="ot">NA</span>))</a>
<a class="sourceLine" id="cb7-41" title="41">d</a>
<a class="sourceLine" id="cb7-42" title="42"><span class="kw">sqldf</span>(<span class="st">&quot;SELECT COUNT() as numrows FROM d&quot;</span>)</a>
<a class="sourceLine" id="cb7-43" title="43"><span class="kw">sqldf</span>(<span class="st">&quot;SELECT COUNT(b) FROM d&quot;</span>)</a></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="fi-fx.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
